{
  "id": "kafka_clients_src_main_java_org_apache_kafka_clients_GroupRebalanceConfig.java_1",
  "title": "kafka/clients/src/main/java/org/apache/kafka/clients/GroupRebalanceConfig.java",
  "content": "/*\n * Licensed to the Apache Software Foundation (ASF) under one or more\n * contributor license agreements. See the NOTICE file distributed with\n * this work for additional information regarding copyright ownership.\n * The ASF licenses this file to You under the Apache License, Version 2.0\n * (the \"License\"); you may not use this file except in compliance with\n * the License. You may obtain a copy of the License at\n *\n *    http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\npackage org.apache.kafka.clients;\n\nimport org.apache.kafka.common.config.AbstractConfig;\nimport org.apache.kafka.common.requests.JoinGroupRequest;\n\nimport java.util.Locale;\nimport java.util.Optional;\n\n/**\n * Class to extract group rebalance related configs.\n */\npublic class GroupRebalanceConfig {\n\n    public enum ProtocolType {\n        CONSUMER,\n        CONNECT,\n        SHARE;\n\n        @Override\n        public String toString() {\n            return super.toString().toLowerCase(Locale.ROOT);\n        }\n    }\n\n    public final int sessionTimeoutMs;\n    public final int rebalanceTimeoutMs;\n    public final int heartbeatIntervalMs;\n    public final String groupId;\n    public final Optional<String> groupInstanceId;\n    public final Optional<String> rackId;\n    public final long retryBackoffMs;\n    public final long retryBackoffMaxMs;\n\n    public GroupRebalanceConfig(AbstractConfig config, ProtocolType protocolType) {\n        this.sessionTimeoutMs = config.getInt(CommonClientConfigs.SESSION_TIMEOUT_MS_CONFIG);\n\n        // Consumer and Connect use different config names for defining rebalance timeout\n        if ((protocolType == ProtocolType.CONSUMER) || (protocolType == ProtocolType.SHARE)) {\n            this.rebalanceTimeoutMs = config.getInt(CommonClientConfigs.MAX_POLL_INTERVAL_MS_CONFIG);\n\n            String rackId = config.getString(CommonClientConfigs.CLIENT_RACK_CONFIG);\n            this.rackId = rackId == null || rackId.isEmpty() ? Optional.empty() : Optional.of(rackId);\n        } else {\n            this.rebalanceTimeoutMs = config.getInt(CommonClientConfigs.REBALANCE_TIMEOUT_MS_CONFIG);\n            this.rackId = Optional.empty();\n        }\n\n        this.heartbeatIntervalMs = config.getInt(CommonClientConfigs.HEARTBEAT_INTERVAL_MS_CONFIG);\n        this.groupId = config.getString(CommonClientConfigs.GROUP_ID_CONFIG);\n\n        // Static membership is only introduced in consumer API.\n        if (protocolType == ProtocolType.CONSUMER) {\n            String groupInstanceId = config.getString(CommonClientConfigs.GROUP_INSTANCE_ID_CONFIG);\n            if (groupInstanceId != null) {\n                JoinGroupRequest.validateGroupInstanceId(groupInstanceId);\n                this.groupInstanceId = Optional.of(groupInstanceId);\n            } else {\n                this.groupInstanceId = Optional.empty();\n            }\n        } else {\n            this.groupInstanceId = Optional.empty();\n        }\n\n        this.retryBackoffMs = config.getLong(CommonClientConfigs.RETRY_BACKOFF_MS_CONFIG);\n        this.retryBackoffMaxMs = config.getLong(CommonClientConfigs.RETRY_BACKOFF_MAX_MS_CONFIG);\n    }\n\n    // For testing purpose.\n    public GroupRebalanceConfig(final int sessionTimeoutMs,\n                                final int rebalanceTimeoutMs,\n                                final int heartbeatIntervalMs,\n                                String groupId,\n                                Optional<String> groupInstanceId,\n                                String rackId,\n                                long retryBackoffMs,\n                                long retryBackoffMaxMs) {\n        this.sessionTimeoutMs = sessionTimeoutMs;\n        this.rebalanceTimeoutMs = rebalanceTimeoutMs;\n        this.heartbeatIntervalMs = heartbeatIntervalMs;\n        this.groupId = groupId;\n        this.groupInstanceId = groupInstanceId;\n        this.rackId = rackId == null || rackId.isEmpty() ? Optional.empty() : Optional.of(rackId);\n        this.retryBackoffMs = retryBackoffMs;\n        this.retryBackoffMaxMs = retryBackoffMaxMs;\n    }\n}\n",
  "url": "https://github.com/apache/kafka/blob/trunk/clients/src/main/java/org/apache/kafka/clients/GroupRebalanceConfig.java#L1-L103",
  "file_path": "clients/src/main/java/org/apache/kafka/clients/GroupRebalanceConfig.java",
  "repo_name": "kafka",
  "language": "java",
  "start_line": 1,
  "end_line": 103,
  "last_modified": "2026-02-06T01:16:27.578057",
  "source_type": "github"
}