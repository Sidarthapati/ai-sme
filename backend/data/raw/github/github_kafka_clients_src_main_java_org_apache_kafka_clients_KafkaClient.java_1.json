{
  "id": "kafka_clients_src_main_java_org_apache_kafka_clients_KafkaClient.java_1",
  "title": "kafka/clients/src/main/java/org/apache/kafka/clients/KafkaClient.java",
  "content": "/*\n * Licensed to the Apache Software Foundation (ASF) under one or more\n * contributor license agreements. See the NOTICE file distributed with\n * this work for additional information regarding copyright ownership.\n * The ASF licenses this file to You under the Apache License, Version 2.0\n * (the \"License\"); you may not use this file except in compliance with\n * the License. You may obtain a copy of the License at\n *\n *    http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\npackage org.apache.kafka.clients;\n\nimport org.apache.kafka.common.Node;\nimport org.apache.kafka.common.errors.AuthenticationException;\nimport org.apache.kafka.common.requests.AbstractRequest;\n\nimport java.io.Closeable;\nimport java.util.List;\n\n/**\n * The interface for {@link NetworkClient}\n */\npublic interface KafkaClient extends Closeable {\n\n    /**\n     * Check if we are currently ready to send another request to the given node but don't attempt to connect if we\n     * aren't.\n     *\n     * @param node The node to check\n     * @param now The current timestamp\n     */\n    boolean isReady(Node node, long now);\n\n    /**\n     * Initiate a connection to the given node (if necessary), and return true if already connected. The readiness of a\n     * node will change only when poll is invoked.\n     *\n     * @param node The node to connect to.\n     * @param now The current time\n     * @return true iff we are ready to immediately initiate the sending of another request to the given node.\n     */\n    boolean ready(Node node, long now);\n\n    /**\n     * Return the number of milliseconds to wait, based on the connection state, before attempting to send data. When\n     * disconnected, this respects the reconnect backoff time. When connecting or connected, this handles slow/stalled\n     * connections.\n     *\n     * @param node The node to check\n     * @param now The current timestamp\n     * @return The number of milliseconds to wait.\n     */\n    long connectionDelay(Node node, long now);\n\n    /**\n     * Return the number of milliseconds to wait, based on the connection state and the throttle time, before\n     * attempting to send data. If the connection has been established but being throttled, return throttle delay.\n     * Otherwise, return connection delay.\n     *\n     * @param node the connection to check\n     * @param now the current time in ms\n     */\n    long pollDelayMs(Node node, long now);\n\n    /**\n     * Check if the connection of the node has failed, based on the connection state. Such connection failure are\n     * usually transient and can be resumed in the next {@link #ready(org.apache.kafka.common.Node, long)}\n     * call, but there are cases where transient failures needs to be caught and re-acted upon.\n     *\n     * @param node the node to check\n     * @return true iff the connection has failed and the node is disconnected\n     */\n    boolean connectionFailed(Node node);\n\n    /**\n     * Check if authentication to this node has failed, based on the connection state. Authentication failures are\n     * propagated without any retries.\n     *\n     * @param node the node to check\n     * @return an AuthenticationException iff authentication has failed, null otherwise\n     */\n    AuthenticationException authenticationException(Node node);\n\n    /**\n     * Queue up the given request for sending. Requests can only be sent on ready connections.\n     * @param request The request\n     * @param now The current timestamp\n     */\n    void send(ClientRequest request, long now);\n\n    /**\n     * Do actual reads and writes from sockets.\n     *\n     * @param timeout The maximum amount of time to wait for responses in ms, must be non-negative. The implementation\n     *                is free to use a lower value if appropriate (common reasons for this are a lower request or\n     *                metadata update timeout)\n     * @param now The current time in ms\n     * @throws IllegalStateException If a request is sent to an unready node\n     */\n    List<ClientResponse> poll(long timeout, long now);\n\n    /**\n     * Disconnects the connection to a particular node, if there is one.\n     * Any pending ClientRequests for this connection will receive disconnections.\n     *\n     * @param nodeId The id of the node\n     */\n    void disconnect(String nodeId);\n\n    /**\n     * Closes the connection to a particular node (if there is one).\n     * All requests on the connection will be cleared.  ClientRequest callbacks will not be invoked\n     * for the cleared requests, nor will they be returned from poll().\n     *\n     * @param nodeId The id of the node\n     */\n    void close(String nodeId);\n\n    /**\n     * Choose the node with the fewest outstanding requests. This method will prefer a node with an existing connection,\n     * but will potentially choose a node for which we don't yet have a connection if all existing connections are in\n     * use.\n     *\n     * @param now The current time in ms\n     * @return The node with the fewest in-flight requests.\n     */\n    LeastLoadedNode leastLoadedNode(long now);\n\n    /**\n     * The number of currently in-flight requests for which we have not yet returned a response\n     */\n    int inFlightRequestCount();\n\n    /**\n     * Return true if there is at least one in-flight request and false otherwise.\n     */\n    boolean hasInFlightRequests();\n\n    /**\n     * Get the total in-flight requests for a particular node\n     *\n     * @param nodeId The id of the node\n     */\n    int inFlightRequestCount(String nodeId);",
  "url": "https://github.com/apache/kafka/blob/trunk/clients/src/main/java/org/apache/kafka/clients/KafkaClient.java#L1-L150",
  "file_path": "clients/src/main/java/org/apache/kafka/clients/KafkaClient.java",
  "repo_name": "kafka",
  "language": "java",
  "start_line": 1,
  "end_line": 150,
  "last_modified": "2026-02-06T01:16:27.578284",
  "source_type": "github"
}