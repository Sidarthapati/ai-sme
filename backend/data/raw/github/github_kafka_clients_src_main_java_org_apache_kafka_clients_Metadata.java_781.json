{
  "id": "kafka_clients_src_main_java_org_apache_kafka_clients_Metadata.java_781",
  "title": "kafka/clients/src/main/java/org/apache/kafka/clients/Metadata.java",
  "content": "                                          int requestVersion,\n                                          boolean isPartialUpdate) {\n            this.requestBuilder = requestBuilder;\n            this.requestVersion = requestVersion;\n            this.isPartialUpdate = isPartialUpdate;\n        }\n    }\n\n    /**\n     * Represents current leader state known in metadata. It is possible that we know the leader, but not the\n     * epoch if the metadata is received from a broker which does not support a sufficient Metadata API version.\n     * It is also possible that we know of the leader epoch, but not the leader when it is derived\n     * from an external source (e.g. a committed offset).\n     */\n    public static class LeaderAndEpoch {\n        private static final LeaderAndEpoch NO_LEADER_OR_EPOCH = new LeaderAndEpoch(Optional.empty(), Optional.empty());\n\n        public final Optional<Node> leader;\n        public final Optional<Integer> epoch;\n\n        public LeaderAndEpoch(Optional<Node> leader, Optional<Integer> epoch) {\n            this.leader = Objects.requireNonNull(leader);\n            this.epoch = Objects.requireNonNull(epoch);\n        }\n\n        public static LeaderAndEpoch noLeaderOrEpoch() {\n            return NO_LEADER_OR_EPOCH;\n        }\n\n        @Override\n        public boolean equals(Object o) {\n            if (this == o) return true;\n            if (o == null || getClass() != o.getClass()) return false;\n\n            LeaderAndEpoch that = (LeaderAndEpoch) o;\n\n            if (!leader.equals(that.leader)) return false;\n            return epoch.equals(that.epoch);\n        }\n\n        @Override\n        public int hashCode() {\n            int result = leader.hashCode();\n            result = 31 * result + epoch.hashCode();\n            return result;\n        }\n\n        @Override\n        public String toString() {\n            return \"LeaderAndEpoch{\" +\n                    \"leader=\" + leader +\n                    \", epoch=\" + epoch.map(Number::toString).orElse(\"absent\") +\n                    '}';\n        }\n    }\n\n    public static class LeaderIdAndEpoch {\n        public final Optional<Integer> leaderId;\n        public final Optional<Integer> epoch;\n\n        public LeaderIdAndEpoch(Optional<Integer> leaderId, Optional<Integer> epoch) {\n            this.leaderId = Objects.requireNonNull(leaderId);\n            this.epoch = Objects.requireNonNull(epoch);\n        }\n\n        @Override\n        public String toString() {\n            return \"LeaderIdAndEpoch{\" +\n                \"leaderId=\" + leaderId.map(Number::toString).orElse(\"absent\") +\n                \", epoch=\" + epoch.map(Number::toString).orElse(\"absent\") +\n                '}';\n        }\n    }\n}\n",
  "url": "https://github.com/apache/kafka/blob/trunk/clients/src/main/java/org/apache/kafka/clients/Metadata.java#L781-L855",
  "file_path": "clients/src/main/java/org/apache/kafka/clients/Metadata.java",
  "repo_name": "kafka",
  "language": "java",
  "start_line": 781,
  "end_line": 855,
  "last_modified": "2026-02-06T01:16:27.578514",
  "source_type": "github"
}