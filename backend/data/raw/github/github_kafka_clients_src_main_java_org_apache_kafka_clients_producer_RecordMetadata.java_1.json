{
  "id": "kafka_clients_src_main_java_org_apache_kafka_clients_producer_RecordMetadata.java_1",
  "title": "kafka/clients/src/main/java/org/apache/kafka/clients/producer/RecordMetadata.java",
  "content": "/*\n * Licensed to the Apache Software Foundation (ASF) under one or more\n * contributor license agreements. See the NOTICE file distributed with\n * this work for additional information regarding copyright ownership.\n * The ASF licenses this file to You under the Apache License, Version 2.0\n * (the \"License\"); you may not use this file except in compliance with\n * the License. You may obtain a copy of the License at\n *\n *    http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\npackage org.apache.kafka.clients.producer;\n\nimport org.apache.kafka.common.TopicPartition;\nimport org.apache.kafka.common.record.RecordBatch;\nimport org.apache.kafka.common.requests.ProduceResponse;\n\n/**\n * The metadata for a record that has been acknowledged by the server\n */\npublic final class RecordMetadata {\n\n    /**\n     * Partition value for record without partition assigned\n     */\n    public static final int UNKNOWN_PARTITION = -1;\n\n    private final long offset;\n    // The timestamp of the message.\n    // If LogAppendTime is used for the topic, the timestamp will be the timestamp returned by the broker.\n    // If CreateTime is used for the topic, the timestamp is the timestamp in the corresponding ProducerRecord if the\n    // user provided one. Otherwise, it will be the producer local time when the producer record was handed to the\n    // producer.\n    private final long timestamp;\n    private final int serializedKeySize;\n    private final int serializedValueSize;\n    private final TopicPartition topicPartition;\n\n    /**\n     * Creates a new instance with the provided parameters.\n     */\n    public RecordMetadata(TopicPartition topicPartition, long baseOffset, int batchIndex, long timestamp,\n                          int serializedKeySize, int serializedValueSize) {\n        // ignore the batchIndex if the base offset is -1, since this indicates the offset is unknown\n        this.offset = baseOffset == -1 ? baseOffset : baseOffset + batchIndex;\n        this.timestamp = timestamp;\n        this.serializedKeySize = serializedKeySize;\n        this.serializedValueSize = serializedValueSize;\n        this.topicPartition = topicPartition;\n    }\n\n    /**\n     * Indicates whether the record metadata includes the offset.\n     * @return true if the offset is included in the metadata, false otherwise.\n     */\n    public boolean hasOffset() {\n        return this.offset != ProduceResponse.INVALID_OFFSET;\n    }\n\n    /**\n     * The offset of the record in the topic/partition.\n     * @return the offset of the record, or -1 if {{@link #hasOffset()}} returns false.\n     */\n    public long offset() {\n        return this.offset;\n    }\n\n    /**\n     * Indicates whether the record metadata includes the timestamp.\n     * @return true if a valid timestamp exists, false otherwise.\n     */\n    public boolean hasTimestamp() {\n        return this.timestamp != RecordBatch.NO_TIMESTAMP;\n    }\n\n    /**\n     * The timestamp of the record in the topic/partition.\n     *\n     * @return the timestamp of the record, or -1 if the {{@link #hasTimestamp()}} returns false.\n     */\n    public long timestamp() {\n        return this.timestamp;\n    }\n\n    /**\n     * The size of the serialized, uncompressed key in bytes. If key is null, the returned size\n     * is -1.\n     */\n    public int serializedKeySize() {\n        return this.serializedKeySize;\n    }\n\n    /**\n     * The size of the serialized, uncompressed value in bytes. If value is null, the returned\n     * size is -1.\n     */\n    public int serializedValueSize() {\n        return this.serializedValueSize;\n    }\n\n    /**\n     * The topic the record was appended to\n     */\n    public String topic() {\n        return this.topicPartition.topic();\n    }\n\n    /**\n     * The partition the record was sent to\n     */\n    public int partition() {\n        return this.topicPartition.partition();\n    }\n\n    @Override\n    public String toString() {\n        return topicPartition.toString() + \"@\" + offset;\n    }\n}\n",
  "url": "https://github.com/apache/kafka/blob/trunk/clients/src/main/java/org/apache/kafka/clients/producer/RecordMetadata.java#L1-L125",
  "file_path": "clients/src/main/java/org/apache/kafka/clients/producer/RecordMetadata.java",
  "repo_name": "kafka",
  "language": "java",
  "start_line": 1,
  "end_line": 125,
  "last_modified": "2026-02-06T01:16:27.608915",
  "source_type": "github"
}