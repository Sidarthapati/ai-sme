{
  "id": "kafka_clients_src_main_java_org_apache_kafka_clients_ClientResponse.java_1",
  "title": "kafka/clients/src/main/java/org/apache/kafka/clients/ClientResponse.java",
  "content": "/*\n * Licensed to the Apache Software Foundation (ASF) under one or more\n * contributor license agreements. See the NOTICE file distributed with\n * this work for additional information regarding copyright ownership.\n * The ASF licenses this file to You under the Apache License, Version 2.0\n * (the \"License\"); you may not use this file except in compliance with\n * the License. You may obtain a copy of the License at\n *\n *    http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\npackage org.apache.kafka.clients;\n\nimport org.apache.kafka.common.errors.AuthenticationException;\nimport org.apache.kafka.common.errors.UnsupportedVersionException;\nimport org.apache.kafka.common.requests.AbstractResponse;\nimport org.apache.kafka.common.requests.RequestHeader;\n\n/**\n * A response from the server. Contains both the body of the response as well as the correlated request\n * metadata that was originally sent.\n */\npublic class ClientResponse {\n\n    private final RequestHeader requestHeader;\n    private final RequestCompletionHandler callback;\n    private final String destination;\n    private final long receivedTimeMs;\n    private final long latencyMs;\n    private final boolean disconnected;\n    private final boolean timedOut;\n    private final UnsupportedVersionException versionMismatch;\n    private final AuthenticationException authenticationException;\n    private final AbstractResponse responseBody;\n\n    /**\n     * @param requestHeader The header of the corresponding request\n     * @param callback The callback to be invoked\n     * @param destination The node the corresponding request was sent to\n     * @param createdTimeMs The unix timestamp when the corresponding request was created\n     * @param receivedTimeMs The unix timestamp when this response was received\n     * @param disconnected Whether the client disconnected before fully reading a response\n     * @param versionMismatch Whether there was a version mismatch that prevented sending the request.\n     * @param responseBody The response contents (or null) if we disconnected, no response was expected,\n     *                     or if there was a version mismatch.\n     */\n    public ClientResponse(RequestHeader requestHeader,\n                          RequestCompletionHandler callback,\n                          String destination,\n                          long createdTimeMs,\n                          long receivedTimeMs,\n                          boolean disconnected,\n                          UnsupportedVersionException versionMismatch,\n                          AuthenticationException authenticationException,\n                          AbstractResponse responseBody) {\n        this(requestHeader,\n             callback,\n             destination,\n             createdTimeMs,\n             receivedTimeMs,\n             disconnected,\n             false,\n             versionMismatch,\n             authenticationException,\n             responseBody);\n    }\n\n    /**\n     * @param requestHeader The header of the corresponding request\n     * @param callback The callback to be invoked\n     * @param destination The node the corresponding request was sent to\n     * @param createdTimeMs The unix timestamp when the corresponding request was created\n     * @param receivedTimeMs The unix timestamp when this response was received\n     * @param disconnected Whether the client disconnected before fully reading a response\n     * @param timedOut Whether the client was disconnected because of a timeout; when setting this\n     *                 to <code>true</code>, <code>disconnected</code> must be <code>true</code>\n     *                 or an {@link IllegalStateException} will be thrown\n     * @param versionMismatch Whether there was a version mismatch that prevented sending the request.\n     * @param responseBody The response contents (or null) if we disconnected, no response was expected,\n     *                     or if there was a version mismatch.\n     */\n    public ClientResponse(RequestHeader requestHeader,\n                          RequestCompletionHandler callback,\n                          String destination,\n                          long createdTimeMs,\n                          long receivedTimeMs,\n                          boolean disconnected,\n                          boolean timedOut,\n                          UnsupportedVersionException versionMismatch,\n                          AuthenticationException authenticationException,\n                          AbstractResponse responseBody) {\n        if (!disconnected && timedOut)\n            throw new IllegalStateException(\"The client response can't be in the state of connected, yet timed out\");\n\n        this.requestHeader = requestHeader;\n        this.callback = callback;\n        this.destination = destination;\n        this.receivedTimeMs = receivedTimeMs;\n        this.latencyMs = receivedTimeMs - createdTimeMs;\n        this.disconnected = disconnected;\n        this.timedOut = timedOut;\n        this.versionMismatch = versionMismatch;\n        this.authenticationException = authenticationException;\n        this.responseBody = responseBody;\n    }\n\n    public long receivedTimeMs() {\n        return receivedTimeMs;\n    }\n\n    public boolean wasDisconnected() {\n        return disconnected;\n    }\n\n    public boolean wasTimedOut() {\n        return timedOut;\n    }\n\n    public UnsupportedVersionException versionMismatch() {\n        return versionMismatch;\n    }\n\n    public AuthenticationException authenticationException() {\n        return authenticationException;\n    }\n\n    public RequestHeader requestHeader() {\n        return requestHeader;\n    }\n\n    public String destination() {\n        return destination;\n    }\n\n    public AbstractResponse responseBody() {\n        return responseBody;\n    }\n\n    public boolean hasResponse() {\n        return responseBody != null;\n    }\n\n    public long requestLatencyMs() {\n        return latencyMs;\n    }",
  "url": "https://github.com/apache/kafka/blob/trunk/clients/src/main/java/org/apache/kafka/clients/ClientResponse.java#L1-L150",
  "file_path": "clients/src/main/java/org/apache/kafka/clients/ClientResponse.java",
  "repo_name": "kafka",
  "language": "java",
  "start_line": 1,
  "end_line": 150,
  "last_modified": "2026-02-06T01:16:27.577285",
  "source_type": "github"
}