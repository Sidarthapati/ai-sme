{
  "id": "kafka_clients_src_main_java_org_apache_kafka_clients_admin_DescribeReplicaLogDirsResult.java_1",
  "title": "kafka/clients/src/main/java/org/apache/kafka/clients/admin/DescribeReplicaLogDirsResult.java",
  "content": "/*\n * Licensed to the Apache Software Foundation (ASF) under one or more\n * contributor license agreements. See the NOTICE file distributed with\n * this work for additional information regarding copyright ownership.\n * The ASF licenses this file to You under the Apache License, Version 2.0\n * (the \"License\"); you may not use this file except in compliance with\n * the License. You may obtain a copy of the License at\n *\n *    http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\npackage org.apache.kafka.clients.admin;\n\nimport org.apache.kafka.common.KafkaFuture;\nimport org.apache.kafka.common.TopicPartitionReplica;\nimport org.apache.kafka.common.requests.DescribeLogDirsResponse;\n\nimport java.util.Collection;\nimport java.util.HashMap;\nimport java.util.Map;\nimport java.util.concurrent.ExecutionException;\n\n/**\n * The result of {@link Admin#describeReplicaLogDirs(Collection)}.\n */\npublic class DescribeReplicaLogDirsResult {\n    private final Map<TopicPartitionReplica, KafkaFuture<ReplicaLogDirInfo>> futures;\n\n    DescribeReplicaLogDirsResult(Map<TopicPartitionReplica, KafkaFuture<ReplicaLogDirInfo>> futures) {\n        this.futures = futures;\n    }\n\n    /**\n     * Return a map from replica to future which can be used to check the log directory information of individual replicas\n     */\n    public Map<TopicPartitionReplica, KafkaFuture<ReplicaLogDirInfo>> values() {\n        return futures;\n    }\n\n    /**\n     * Return a future which succeeds if log directory information of all replicas are available\n     */\n    public KafkaFuture<Map<TopicPartitionReplica, ReplicaLogDirInfo>> all() {\n        return KafkaFuture.allOf(futures.values().toArray(new KafkaFuture<?>[0]))\n            .thenApply(v -> {\n                Map<TopicPartitionReplica, ReplicaLogDirInfo> replicaLogDirInfos = new HashMap<>();\n                for (Map.Entry<TopicPartitionReplica, KafkaFuture<ReplicaLogDirInfo>> entry : futures.entrySet()) {\n                    try {\n                        replicaLogDirInfos.put(entry.getKey(), entry.getValue().get());\n                    } catch (InterruptedException | ExecutionException e) {\n                        // This should be unreachable, because allOf ensured that all the futures completed successfully.\n                        throw new RuntimeException(e);\n                    }\n                }\n                return replicaLogDirInfos;\n            });\n    }\n\n    public static class ReplicaLogDirInfo {\n        \n        private final String currentReplicaLogDir;\n        private final long currentReplicaOffsetLag;\n        private final String futureReplicaLogDir;\n        private final long futureReplicaOffsetLag;\n\n        ReplicaLogDirInfo() {\n            this(null, DescribeLogDirsResponse.INVALID_OFFSET_LAG, null, DescribeLogDirsResponse.INVALID_OFFSET_LAG);\n        }\n\n        ReplicaLogDirInfo(String currentReplicaLogDir,\n                          long currentReplicaOffsetLag,\n                          String futureReplicaLogDir,\n                          long futureReplicaOffsetLag) {\n            this.currentReplicaLogDir = currentReplicaLogDir;\n            this.currentReplicaOffsetLag = currentReplicaOffsetLag;\n            this.futureReplicaLogDir = futureReplicaLogDir;\n            this.futureReplicaOffsetLag = futureReplicaOffsetLag;\n        }\n\n        /**\n         * The current log directory of the replica of this partition on the given broker.\n         * Null if no replica is not found for this partition on the given broker.\n         */\n        public String getCurrentReplicaLogDir() {\n            return currentReplicaLogDir;\n        }\n\n        /**\n         * Defined as max(HW of partition - LEO of the replica, 0).\n         */\n        public long getCurrentReplicaOffsetLag() {\n            return currentReplicaOffsetLag;\n        }\n\n        /**\n         * The future log directory of the replica of this partition on the given broker.\n         * Null if the replica of this partition is not being moved to another log directory on the given broker.\n         */\n        public String getFutureReplicaLogDir() {\n            return futureReplicaLogDir;\n        }\n\n        /**\n         * The LEO of the replica - LEO of the future log of this replica in the destination log directory.\n         * -1 if either there is not replica for this partition or the replica of this partition is not being moved to another log directory on the given broker.\n         */\n        public long getFutureReplicaOffsetLag() {\n            return futureReplicaOffsetLag;\n        }\n\n        @Override\n        public String toString() {\n            StringBuilder builder = new StringBuilder();\n            if (futureReplicaLogDir != null) {\n                builder.append(\"(currentReplicaLogDir=\")\n                    .append(currentReplicaLogDir)\n                    .append(\", futureReplicaLogDir=\")\n                    .append(futureReplicaLogDir)\n                    .append(\", futureReplicaOffsetLag=\")\n                    .append(futureReplicaOffsetLag)\n                    .append(\")\");\n            } else {\n                builder.append(\"ReplicaLogDirInfo(currentReplicaLogDir=\").append(currentReplicaLogDir).append(\")\");\n            }\n            return builder.toString();\n        }\n    }\n}\n",
  "url": "https://github.com/apache/kafka/blob/trunk/clients/src/main/java/org/apache/kafka/clients/admin/DescribeReplicaLogDirsResult.java#L1-L134",
  "file_path": "clients/src/main/java/org/apache/kafka/clients/admin/DescribeReplicaLogDirsResult.java",
  "repo_name": "kafka",
  "language": "java",
  "start_line": 1,
  "end_line": 134,
  "last_modified": "2026-02-06T01:16:27.583505",
  "source_type": "github"
}