{
  "id": "kafka_clients_src_main_java_org_apache_kafka_clients_producer_ProducerRecord.java_1",
  "title": "kafka/clients/src/main/java/org/apache/kafka/clients/producer/ProducerRecord.java",
  "content": "/*\n * Licensed to the Apache Software Foundation (ASF) under one or more\n * contributor license agreements. See the NOTICE file distributed with\n * this work for additional information regarding copyright ownership.\n * The ASF licenses this file to You under the Apache License, Version 2.0\n * (the \"License\"); you may not use this file except in compliance with\n * the License. You may obtain a copy of the License at\n *\n *    http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\npackage org.apache.kafka.clients.producer;\n\nimport org.apache.kafka.common.header.Header;\nimport org.apache.kafka.common.header.Headers;\nimport org.apache.kafka.common.header.internals.RecordHeaders;\n\nimport java.util.Objects;\n\n/**\n * A key/value pair to be sent to Kafka. This consists of a topic name to which the record is being sent, an optional\n * partition number, and an optional key and value.\n * <p>\n * If a valid partition number is specified that partition will be used when sending the record. If no partition is\n * specified but a key is present a partition will be chosen using a hash of the key. If neither key nor partition is\n * present a partition will be assigned in a round-robin fashion. Note that partition numbers are 0-indexed.\n * <p>\n * The record also has an associated timestamp. If the user did not provide a timestamp, the producer will stamp the\n * record with its current time. The timestamp eventually used by Kafka depends on the timestamp type configured for\n * the topic.\n * <li>\n * If the topic is configured to use {@link org.apache.kafka.common.record.TimestampType#CREATE_TIME CreateTime},\n * the timestamp in the producer record will be used by the broker.\n * </li>\n * <li>\n * If the topic is configured to use {@link org.apache.kafka.common.record.TimestampType#LOG_APPEND_TIME LogAppendTime},\n * the timestamp in the producer record will be overwritten by the broker with the broker local time when it appends the\n * message to its log.\n * </li>\n * <p>\n * In either of the cases above, the timestamp that has actually been used will be returned to user in\n * {@link RecordMetadata}\n */\npublic class ProducerRecord<K, V> {\n\n    private final String topic;\n    private final Integer partition;\n    private final Headers headers;\n    private final K key;\n    private final V value;\n    private final Long timestamp;\n\n    /**\n     * Creates a record with a specified timestamp to be sent to a specified topic and partition\n     * \n     * @param topic The topic the record will be appended to\n     * @param partition The partition to which the record should be sent\n     * @param timestamp The timestamp of the record, in milliseconds since epoch. If null, the producer will assign\n     *                  the timestamp using System.currentTimeMillis().\n     * @param key The key that will be included in the record\n     * @param value The record contents\n     * @param headers the headers that will be included in the record\n     */\n    public ProducerRecord(String topic, Integer partition, Long timestamp, K key, V value, Iterable<Header> headers) {\n        if (topic == null)\n            throw new IllegalArgumentException(\"Topic cannot be null.\");\n        if (timestamp != null && timestamp < 0)\n            throw new IllegalArgumentException(\n                    String.format(\"Invalid timestamp: %d. Timestamp should always be non-negative or null.\", timestamp));\n        if (partition != null && partition < 0)\n            throw new IllegalArgumentException(\n                    String.format(\"Invalid partition: %d. Partition number should always be non-negative or null.\", partition));\n        this.topic = topic;\n        this.partition = partition;\n        this.key = key;\n        this.value = value;\n        this.timestamp = timestamp;\n        this.headers = new RecordHeaders(headers);\n    }\n\n    /**\n     * Creates a record with a specified timestamp to be sent to a specified topic and partition\n     *\n     * @param topic The topic the record will be appended to\n     * @param partition The partition to which the record should be sent\n     * @param timestamp The timestamp of the record, in milliseconds since epoch. If null, the producer will assign the\n     *                  timestamp using System.currentTimeMillis().\n     * @param key The key that will be included in the record\n     * @param value The record contents\n     */\n    public ProducerRecord(String topic, Integer partition, Long timestamp, K key, V value) {\n        this(topic, partition, timestamp, key, value, null);\n    }\n\n    /**\n     * Creates a record to be sent to a specified topic and partition\n     *\n     * @param topic The topic the record will be appended to\n     * @param partition The partition to which the record should be sent\n     * @param key The key that will be included in the record\n     * @param value The record contents\n     * @param headers The headers that will be included in the record\n     */\n    public ProducerRecord(String topic, Integer partition, K key, V value, Iterable<Header> headers) {\n        this(topic, partition, null, key, value, headers);\n    }\n    \n    /**\n     * Creates a record to be sent to a specified topic and partition\n     *\n     * @param topic The topic the record will be appended to\n     * @param partition The partition to which the record should be sent\n     * @param key The key that will be included in the record\n     * @param value The record contents\n     */\n    public ProducerRecord(String topic, Integer partition, K key, V value) {\n        this(topic, partition, null, key, value, null);\n    }\n    \n    /**\n     * Create a record to be sent to Kafka\n     * \n     * @param topic The topic the record will be appended to\n     * @param key The key that will be included in the record\n     * @param value The record contents\n     */\n    public ProducerRecord(String topic, K key, V value) {\n        this(topic, null, null, key, value, null);\n    }\n    \n    /**\n     * Create a record with no key\n     * \n     * @param topic The topic this record should be sent to\n     * @param value The record contents\n     */\n    public ProducerRecord(String topic, V value) {\n        this(topic, null, null, null, value, null);\n    }\n\n    /**\n     * @return The topic this record is being sent to\n     */\n    public String topic() {\n        return topic;",
  "url": "https://github.com/apache/kafka/blob/trunk/clients/src/main/java/org/apache/kafka/clients/producer/ProducerRecord.java#L1-L150",
  "file_path": "clients/src/main/java/org/apache/kafka/clients/producer/ProducerRecord.java",
  "repo_name": "kafka",
  "language": "java",
  "start_line": 1,
  "end_line": 150,
  "last_modified": "2026-02-06T01:16:27.608837",
  "source_type": "github"
}