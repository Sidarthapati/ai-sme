{
  "id": "confluence_display_KAFKA_Changing+Defaults+in+Connect+3.0.0",
  "title": "Changing Defaults in Connect 3.0.0 - Apache Kafka - Apache Software Foundation",
  "content": "This page documents all of the KIPs related to Connect since AK 0.10.0.0 (the release after Connect was first introduced in 0.9.0.0), and identifies the default behaviors that may make sense to change in AK 3.0.0. See the\nlist of release plans\nfor the list of all KIPs.\nMost (if not all) Connect changes to date have been backward compatible with respect to:\nworker configurations\nlog configuration\nconnector configurations\nconnector implementations\nThis means that users that are operating Connect can easily do a rolling upgrade of their Connect clusters without having to change their worker configurations, Log4J configurations, or any persisted connector configurations and without having to upgrade any connector implementations. Likewise, users operating Connect can choose when to upgrade individual connector implementations.\nThe changes proposed below continue to avoid requiring changes to persisted connector configurations or requiring upgrades of connector implementations. Many of the proposed changes have been recommended for some time, but making them in the AK 3.0.0 major release may require some users to make small changes to their worker configuration and Log4J worker configurations during the upgrade process.\nThis page is not a KIP.\nDiscussion thread\n:\nhere\nAK Release\nKIP\nDefault Behavior\nDesired Change for AK 3.0.0\nDeprecation KIP (if different)\nJira Issue\n0.10.0.0\nKIP-51 - List Connectors REST API\nAdds new REST resources\nNone\nn/a\nn/a\nKIP-52: Connector Control APIs\nAdds new REST resources\nNone\nn/a\nn/a\nKIP-56: Allow cross origin HTTP requests on all HTTP methods\nAdds to the worker config the `\naccess.control.allow.methods\n` property with a default that allows cross origin requests for GET, POST and HEAD\nNone\nn/a\nn/a\n0.10.1.0\nKIP-65: Expose timestamps to Connect\nModifies the record interfaces to support timestamps\nNone\nn/a\nn/a\nKIP-75 - Add per-connector Converters\nAdds option of defining converters in connector configurations\nNone\nn/a\nn/a\n0.10.2.0\nKIP-66: Single Message Transforms for Kafka Connect\nAdded SMTs to connector configurations\nNone\nn/a\nn/a\nKIP-89: Allow sink connectors to decouple flush and offset commit\nChanged sink task interfaces\nNone\nn/a\nn/a\n0.11.0.0\nKIP-66: Single Message Transforms for Kafka Connect\noptionally used in connector configs\nNone\nn/a\nn/a\nKIP-128: Add ByteArrayConverter for Kafka Connect\noptionally used in worker and/or connector configs\nNone\nn/a\nn/a\nKIP-146 - Classloading Isolation in Connect\nbehavior enabled by default\nNone\nn/a\nn/a\nKIP-151 Expose Connector type in REST API\nchange in selected REST responses\nNone\nn/a\nn/a\nKIP-154 Add Kafka Connect configuration properties for creating internal topics\ndefaults remain sensible\nNone\nn/a\nn/a\n1.0.0\nKIP-196: Add metrics to Kafka Connect framework\nadded new metrics\nNone\nn/a\nn/a\nKIP-197 Connect REST API should include the connector type when describing a connector\nchange in selected REST responses\nNone\nn/a\nn/a\n1.1.0\nKIP-145 - Expose Record Headers in Kafka Connect\nadded new interfaces and APIs\nNone\nn/a\nn/a\nKIP-208: Add SSL support to Kafka Connect REST interface\nSSL is not enabled by default.\nKIP-573\nchanged the\nssl.protocol\ndefault to \"\nTLSv1.3\n\" for JDK 11 and \"\nTLSv1.2\n\" for older JDKs, and changed the\nssl.enabled.protocols\ndefault to \"\nTLSv1.2,\nTLSv1.3\n\" for JDK 11 and \"\nTLSv1.2\n\" for older JDKs.\nDeprecates `\nrest.host.name\n` and `\nrest.port\n` for removal in a future major release.\nRemove the `\nrest.host.name\n` and `\nrest.port\n` worker configuration properties deprecated in\nKIP-208\n(AK 1.1)\n. Re\nmoving these may break external examples and demos where these are still used, but those would be better to use the preferred listener configs now anyway.\nWe will not enable SSL by default since that requires the user to set up a keystore and truststore, which Connect can't do by default.\nRemoval already approved in\nKIP-208\nKAFKA-12482\n-\nGetting issue details...\nSTATUS\nKIP-212: Enforce set of legal characters for connector names\nnew connector names must only use legal characters, and may not have leading and trailing whitespace.\nNone\nn/a\nn/a\nKIP-215: Add topic regex support for Connect sinks\nadded `\ntopics.regex\n` sink connector configuration property.\nNone. Removing the `\ntopics\n` sink connector configuration property would be invasive, and it has not been deprecated.\nn/a\nn/a\nKIP-238: Expose Kafka cluster ID in Connect REST API\nchange in selected REST responses\nNone\nn/a\nn/a\n2.0.0\nKIP-174 - Deprecate and remove internal converter configs in WorkerConfig\ndeprecated these two worker configs, stating that they will be removed in a subsequent major release.\nRemove the deprecated `\ninternal.key.converter\n` and `\ninternal.value.converter\n` worker configuration properties. Connect has been logging usage of these as warnings for some time, and it is likely using something other than the defaults is fragile and may not work due to the assumption in Connect.\nAlready approved in\nKIP-174\n, though removal explicitly approved in\nKIP-738: Removal of Connect's internal converter properties\nKAFKA-12717\n-\nGetting issue details...\nSTATUS\nKIP-285: Connect Rest Extension Plugin\noptionally used in worker config\nNone\nn/a\nn/a\nKIP-297: Externalizing Secrets for Connect Configurations\noptionally used in worker config\nNone\nn/a\nn/a\nKIP-298: Error Handling in Connect\nThe default behavior in Connect remains to kill the task on the first error in any stage. To change this behavior,\nseveral worker configurations must be enabled; the defaults are to not enable error logging, not include message details, and to not use a DLQ topic.\nNone. Error handling and logging should remain opt-in.\nn/a\nn/a\nKIP-305: Add Connect primitive number converters\nAdded new converter implementations, which are optionally specified in worker and connector configurations.\nNone\nn/a\nn/a\n2.1.0\nNone\nNone\nNone\nn/a\nn/a\n2.2.0\nNone\nNone\nNone\nn/a\nn/a\n2.3.0\nKIP-411: Make default Kafka Connect worker task client IDs distinct\nChanged distributed worker configuration's default for `\nclient.id\n`.\nNone\nn/a\nn/a\nKIP-415: Incremental Cooperative Rebalancing in Kafka Connect\nChanged worker configuration's default for `\nconnect.protocol\n`, and added several other worker configurations.\nNone\nn/a\nn/a\nKIP-449: Add connector contexts to Connect worker logs\nDefined ability to enable connector contexts in Log4J logs, but did not enable this by default.\nChange the `\nconnect-log4j.properties\n` file to enable connector contexts in Log4J logs by default.\nKIP-721: Enable connector log contexts in Connect Log4j configuration\nKAFKA-12484\n-\nGetting issue details...\nSTATUS\nKIP-454: Expansion of the ConnectClusterState interface\nExpanded ConnectClusterState interface, added new interface, and changed selected REST responses.\nNone\nn/a\nn/a\nKIP-458: Connector Client Config Override Policy\nWorker config sets\nconnector.client.config.override.policy=None\nby default to maintain backward compatibility.\nChange the default for `\nconnector.client.config.override.policy\n` to `\nAll\n`, still allowing connector configurations to override client behavior.\nKIP-722: Enable connector client overrides by default\nKAFKA-12483\n-\nGetting issue details...\nSTATUS\nKIP-465: Add Consolidated Connector Endpoint to Connect REST API\nAdds optional query parameter to\n/connectors\nendpoint\nNone\nn/a\nn/a\n2.4.0\nKIP-481: SerDe Improvements for Connect Decimal type in JSON\nAdded to JSON converter configuration a `\ndecimal.format\n` property that defaults to `\nBASE64\n`, and that can optionally be set to `\nNUMERIC\n`\nNone. Even though\nNUMERIC\nis probably a better default, changing this might require users to change potentially many existing persisted connector configurations before upgrading. This is not worth changing.\nn/a\nn/a\nKIP-495: Dynamically Adjust Log Levels in Connect\nAdds new `\n/admin\n` REST endpoints.\nNone\nn/a\nn/a\nKIP-507: Securing Internal Connect REST Endpoints\nChanged worker configuration's default for `\nconnect.protocol\n`, and added several other worker configurations.\nNone\nn/a\nn/a\nKIP-521: Enable redirection of Connect's log4j messages to a file by default\nModified default Log4J configuration to also write worker logs to a file, in addition to the console.\nNone\nn/a\nn/a\n2.5.0\nKIP-558: Track the set of actively used topics by connectors in Kafka Connect\nAdds new worker configuration properties, where behavior is enabled by default\nNone\nn/a\nn/a\n2.6.0\nKIP-131 - Add access to OffsetStorageReader from SourceConnector\nAllowed source tasks to get OffsetStorageReader via task context.\nNone\nn/a\nn/a\nKIP-158: Kafka Connect should allow source connectors to set topic-specific settings for new topics\nAdded\ntopic.creation.enable\nworker configuration option, defaulting to `\ntrue\n`. Adds multiple optional connector configuration properties with sensible defaults.\nNone\nn/a\nn/a\nKIP-437: Custom replacement for MaskField SMT\nExpanded behavior of MaskField SMT to allow replacement literals.\nNone\nn/a\nn/a\nKIP 577: Allow HTTP Response Headers to be Configured for Kafka Connect\nAdded `\nresponse.http.headers.\nconfig\n` worker configuration, defaults to empty string.\n????\nKIP-585: Filter and Conditional SMTs\nAdded new optional properties that can be used in connector configuration\nNone\nn/a\nn/a\nKIP-586: Deprecate commit records without record metadata\nDeprecates the\nSourceTask.\ncommitRecord(SourceRecord record)\nmethod.\nNone. We could remove the method, but that would prevent installing and running any connector implementation that still uses that method. Keeping the deprecated method is little effort yet still maximizes compatibility for connector implementations.\nn/a\nn/a\nKIP-605: Expand Connect Worker Internal Topic Settings\nModifies the allowed values of several existing worker configuration properties, and adds optional worker configuration properties for topic settings.\nNone\nn/a\nn/a\nKIP-606: Add Metadata Context to MetricsReporter\nModifies the MetricsReporter extension interface for Connect, Streams, and Broker.\nNone\nn/a\nn/a\nKIP-610: Error Reporting in Sink Connectors\nAdds the ability for a sink task to get an error reporter\nNone\nn/a\nn/a\n2.7.0\nNone\nNone\nNone\nn/a\nn/a\n2.8.0\nKIP-661: Expose task configurations in Connect REST API\nAdds `\n/{connector}/tasks-config\n` endpoint that returns configuration of connector's tasks. Does not add any worker or connector configurations.\nNone\nn/a\nn/a\ndefaults may make sense to change. for which defaults were chosen to maintain backward compatibility, but which may be  with a major upgrade",
  "url": "https://cwiki.apache.org/confluence/display/KAFKA/Changing+Defaults+in+Connect+3.0.0",
  "space": "KAFKA",
  "labels": [],
  "last_modified": null,
  "source_type": "confluence"
}