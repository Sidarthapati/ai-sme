{
  "id": "confluence_display_KAFKA_Kafka+patch+review+tool",
  "title": "Kafka patch review tool - Apache Kafka - Apache Software Foundation",
  "content": "Kafka JIRA and Reviewboard script\n1. Setup\nFollow instructions\nhere\nto setup the jira-python package\nFollow instructions\nhere\nto setup the reviewboard python tools\nInstall the argparse module\nOn Linux -> sudo yum install python-argparse\nOn Mac -> sudo easy_install argparse\n2. Usage\nnnarkhed-mn:kafka-git-idea nnarkhed$ python kafka-patch-review.py --help\nusage: kafka-patch-review.py [-h] -b BRANCH -j JIRA [-s SUMMARY]\n[-d DESCRIPTION] [-r REVIEWBOARD] [-t TESTING]\n[-v VERSION] [-db]\nKafka patch review tool\noptional arguments:\n-h, --help            show this help message and exit\n-b BRANCH, --branch BRANCH\nTracking branch to create diff against\n-j JIRA, --jira JIRA  JIRA corresponding to the reviewboard\n-s SUMMARY, --summary SUMMARY\nSummary for the reviewboard\n-d DESCRIPTION, --description DESCRIPTION\nDescription for reviewboard\n-r REVIEWBOARD, --rb REVIEWBOARD\nReview board that needs to be updated\n-t TESTING, --testing-done TESTING\nText for the Testing Done section of the reviewboard\n-v VERSION, --version VERSION\nVersion of the patch\n-db, --debug          Enable debug mode\n3. Upload patch\nSpecify the branch against which the patch should be created (-b)\nSpecify the corresponding JIRA (-j)\nSpecify an\noptional\nsummary (-s) and description (-d) for the reviewboard\nExample:\npython kafka-patch-review.py -b origin/trunk -j KAFKA-42\n4. Update patch\nSpecify the branch against which the patch should be created (-b)\nSpecify the corresponding JIRA (--jira)\nSpecify the rb to be updated (-r)\nSpecify an\noptional\nsummary (-s) and description (-d) for the reviewboard, if you want to update it\nSpecify an\noptional\nversion of the patch. This will be appended to the jira to create a file named JIRA-<version>.patch. The purpose is to be able to upload multiple patches to the JIRA. This has no bearing on the reviewboard update.\nExample:\npython kafka-patch-review.py -b origin/trunk -j KAFKA-42 -r 14081\nJIRA command line tool\n1. Download the JIRA command line package\nInstall the jira-python package\nsudo easy_install jira-python\n2. Configure JIRA username and password\nInclude a jira.ini file in your $HOME directory that contains your Apache JIRA username and password\nnnarkhed-mn:~ nnarkhed$ cat ~/jira.ini\nuser=nehanarkhede\npassword=***********\nReviewboard\nThis is a quick tutorial on using\nReview Board\nwith Kafka.\n1. Install the post-review tool\nIf you are on RHEL, Fedora or CentOS, follow these steps\nsudo yum install python-setuptools\nsudo easy_install -U RBTools\nIf you are on Mac, follow these steps\nsudo easy_install -U setuptools\nsudo easy_install -U RBTools\nFor other platforms, follow the instructions\nhere\nto setup the post-review tool.\n2. Configure Stuff\nThen you need to configure a few things to make it work:\nFirst set the review board url to use. You can do this from in git:\ngit config reviewboard.url https://reviews.apache.org\nIf you checked out using the git wip http url that confusingly won't work with review board. So you need to configure an override to use the non-http url. You can do this by adding a config file like this:\njkreps$ cat ~/.reviewboardrc\nREPOSITORY = 'git://git.apache.org/kafka.git'\nTARGET_GROUPS = 'kafka'\nGUESS_FIELDS = True\nFAQ\nWhen I run the script, it throws the following error and exits\nnnarkhed$python kafka-patch-review.py -b trunk -j KAFKA-42\nThere don't seem to be any diffs\nThere are 2 reasons that can cause this -\nThe code is not checked into your local branch\nThe -b branch is not pointing to the remote branch. In the example above, \"trunk\" is specified as the branch, which is the local branch. The correct value for the -b (--branch) option is the remote branch. \"git branch -r\" gives the list of the remote branch names.\nWhen I run the script, it throws the following error and exits\nError uploading diff\nYour review request still exists, but the diff is not attached.\nOne of the most common root causes of this error are that the git remote branches are not up-to-date. Since the script already does that, it is probably due to some other problem. You can run the script with the --debug option that will make post-review run in the debug mode and list the root cause of the issue.",
  "url": "https://cwiki.apache.org/confluence/display/KAFKA/Kafka+patch+review+tool",
  "space": "KAFKA",
  "labels": [],
  "last_modified": null,
  "source_type": "confluence"
}