{
  "id": "confluence_display_KAFKA_tutorial+-+set+up+and+run+Kafka+system+tests+with+ducktape",
  "title": "tutorial - set up and run Kafka system tests with ducktape - Apache Kafka - Apache Software Foundation",
  "content": "This tutorial will show you how to set up a test cluster and run Kafka system tests on your local machine. I'll assume here that you have a clone of Kafka trunk.\nThis is broken down into a series of short-ish videos. A summary of the commands run is below each video clip, so you can skip any video clip if you want to.\nEnsure Vagrant and Virtualbox are installed\nWe'll need both Vagrant and Virtualbox to create a test cluster\n$ # Easy to check with these commands:\n$ vagrant --version  # We want vagrant >= 1.6.4\n$ vboxmanage --version\nTo install Vagrant,\ngo here\nTo install Virtualbox,\ngo here\nBootstrap Vagrant for system testing\n$ # This does things like installing necessary Vagrant plugins, creating a Vagrantfile.local, and creating a reusable Vagrant base box\n$ tests/bootstrap-test-env.sh\nBring up the test cluster\nThis part is fairly simple, but can take a while, so bring a good book.\n$ # If you skipped the previous step, make sure you have a Vagrantfile.local in your Kafka directory\n$ cp vagrant/system-test-Vagrantfile.local Vagrantfile.local\n$\n$ # Update Vagrantfile.local, and set num_workers = 10\n$ # If you packaged a box,        set base_box = \"kafkatest-worker\"\n$\n$ vagrant up # This will bring up your cluster\n$\n$ # Other useful vagrant commands\n$ vagrant status \t\t# See how many vms you have, whether they're running, etc.\n$ vagrant ssh <vm_name> # ssh into a vm\n$ vagrant hostmanager   # update /etc/hosts on each vm\n$ vagrant halt \t\t\t# shut down without destroying\n$ vagrant destroy -f \t# destroy the vms\nRun the tests\nHere I'll install ducktape, introduce a few useful ducktape commands, show how to actually run the tests, and give an overview of test output.\n$ # Install ducktape:\n$ pip install ducktape\n$\n$ cd tests\n$\n$ ducktape --version # Good way to check if ducktape is properly installed\n$ ducktape <path> --collect-only  # See which tests ducktape discovers underneath <path>\n$\n$ # Run \"test_console_consumer.py\" with the debug flag turned on\n$ ducktape kafkatest/sanity_checks/test_console_consumer.py --debug\n$\n$ # Run all tests\n$ ducktape kafkatest/tests",
  "url": "https://cwiki.apache.org/confluence/display/KAFKA/tutorial+-+set+up+and+run+Kafka+system+tests+with+ducktape",
  "space": "KAFKA",
  "labels": [],
  "last_modified": null,
  "source_type": "confluence"
}